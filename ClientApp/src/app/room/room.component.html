<!-- Room details-->
<div *ngIf="roomService.roomId && roomService.you.username != null">
  <h4>{{ 'room.detailsTitle' | translate }}</h4>
  <div class="row">
    <div class="col-md-9 col-sm-12">
      <div class="row">
        <div class="col-md-6 col-sm-12" id="divRoomID">
          <h5>{{ 'general.roomID' | translate }}</h5>
          <p>{{ roomService.roomId }}</p>
        </div>
        <div class="col-md-6 col-sm-12" id="divOwnUsername">
          <h5>{{ 'room.yourNameTitle' | translate }}</h5>
          <p>{{ roomService.you.username }}</p>
        </div>
        <div class="col-md-6 col-sm-12" id="divRoomUsers">
          <h5>{{ 'room.roomUsersTitle' | translate }}</h5>
          <p>{{ roomService.users.length }}</p>
        </div>
        <div class="col-md-6 col-sm-12" id="divPlayedCards">
          <h5>{{ 'room.playedCardsCounterTitle' | translate }}</h5>
          <p>{{ roomService.playedCards }}</p>
        </div>
        <div class="col-sm-12" id="divShareLink">
          <h5>{{ 'room.joinLinkTitle' | translate }}</h5>
          <p><a href="{{ joinUrl }}">{{ joinUrl }}</a></p>
        </div>
      </div>     
    </div>
    <div class="col-md-3 col-sm-12">
      <div class="row">
        <div class="col-sm-12 text-center" id="divQrCode">
          <qrcode [qrdata]="joinUrl" [errorCorrectionLevel]="'M'"></qrcode>
        </div>
      </div>   
    </div>   
  </div>

  <!-- Button controls -->
  <div class="pt-3"></div>
  <button type="button" class="btn btn-primary mr-1" data-toggle="collapse" data-target="#selectableCardsContainer" aria-expanded="false" aria-controls="selectableCardsContainer">{{ 'room.playCardButton' | translate }}</button>
  <button type="button" *ngIf="!roomService.cardsRevealed && roomService.you.isAdmin" class="btn btn-primary" (click)="revealCards()">{{ 'room.revealCardsButton' | translate }}</button>
  <button type="button" *ngIf="roomService.cardsRevealed && roomService.you.isAdmin" class="btn btn-danger" (click)="resetCards()">{{ 'room.resetCardsButton' | translate }}</button>

  <!-- Selectable cards collapsible-->
  <div class="collapse" id="selectableCardsContainer">
    <hr />
    <h4 class="mb-3">{{ 'room.yourEstimateTitle' | translate }}</h4>
    <div class="row">
      <div class="col-md-3 col-sm-12 mb-3" *ngFor="let card of roomService.cards; let i=index;">
        <div class="card" data-toggle="collapse" data-target="#selectableCardsContainer" aria-controls="selectableCardsContainer" [ngClass]="{'clickable': !roomService.cardsRevealed}" (click)="!roomService.cardsRevealed ? selectCard(i) : false">
          <div class="card-body">
            <h3 class="card-title" [ngClass]="{'selected': i == roomService.you.selectedCard}" style="user-select: none;">{{ card }}</h3>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Other users -->
  <hr />
  <div id="otherUsersContainer">
    <h4 class="mb-3">{{ 'room.roomUsersTitle' | translate }}</h4>
    <div class="row">
      <div class="col-sm-12 col-md-4 mb-3" *ngFor="let user of roomService.users">
        <div class="card" [ngClass]="{'bg-success': user.selectedCard > -1 && !roomService.cardsRevealed}">
          <div class="card-body">
            <h3 class="card-title"><fa-icon [icon]="faShieldAlt" *ngIf="user.isAdmin"></fa-icon> {{ user.username }}</h3>
            <h4 class="card-text" *ngIf="roomService.cardsRevealed && user.selectedCard != -1">{{ roomService.cards[user.selectedCard] }}</h4>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Shown if the user is currently not in a room -->
<div *ngIf="!roomService.roomId">
  <h2>{{ 'room.noRoom.title' | translate }}</h2>
  <p>{{ 'room.noRoom.explanationPrefix' | translate }} <a href="/">{{ 'room.noRoom.homepageLinkLabel' | translate }}</a> {{ 'room.noRoom.explanationSuffix' | translate }}</p>
</div>

